import*as mathUtils from"./math_utils";const SRGB_TO_XYZ=[[.41233895,.35762064,.18051042],[.2126,.7152,.0722],[.01932141,.11916382,.95034478]],XYZ_TO_SRGB=[[3.2413774792388685,-1.5376652402851851,-.49885366846268053],[-.9691452513005321,1.8758853451067872,.04156585616912061],[.05562093689691305,-.20395524564742123,1.0571799111220335]],WHITE_POINT_D65=[95.047,100,108.883];function argbFromRgb(r,n,e){return(255<<24|(255&r)<<16|(255&n)<<8|255&e)>>>0}function argbFromLinrgb(r){return argbFromRgb(delinearized(r[0]),delinearized(r[1]),delinearized(r[2]))}function alphaFromArgb(r){return r>>24&255}function redFromArgb(r){return r>>16&255}function greenFromArgb(r){return r>>8&255}function blueFromArgb(r){return 255&r}function isOpaque(r){return 255<=alphaFromArgb(r)}function argbFromXyz(r,n,e){var a=XYZ_TO_SRGB,i=a[0][0]*r+a[0][1]*n+a[0][2]*e,o=a[1][0]*r+a[1][1]*n+a[1][2]*e,r=a[2][0]*r+a[2][1]*n+a[2][2]*e;return argbFromRgb(delinearized(i),delinearized(o),delinearized(r))}function xyzFromArgb(r){var n=linearized(redFromArgb(r)),e=linearized(greenFromArgb(r)),r=linearized(blueFromArgb(r));return mathUtils.matrixMultiply([n,e,r],SRGB_TO_XYZ)}function argbFromLab(r,n,e){var a=WHITE_POINT_D65,r=(r+16)/116,e=r-e/200,n=labInvf(n/500+r),r=labInvf(r),e=labInvf(e);return argbFromXyz(n*a[0],r*a[1],e*a[2])}function labFromArgb(r){var n=linearized(redFromArgb(r)),e=linearized(greenFromArgb(r)),r=linearized(blueFromArgb(r)),a=SRGB_TO_XYZ,i=a[0][0]*n+a[0][1]*e+a[0][2]*r,o=a[1][0]*n+a[1][1]*e+a[1][2]*r,n=a[2][0]*n+a[2][1]*e+a[2][2]*r,e=WHITE_POINT_D65,a=i/e[0],r=o/e[1],i=n/e[2],o=labF(a),n=labF(r);return[116*n-16,500*(o-n),200*(n-labF(i))]}function argbFromLstar(r){r=delinearized(yFromLstar(r));return argbFromRgb(r,r,r)}function lstarFromArgb(r){return 116*labF(xyzFromArgb(r)[1]/100)-16}function yFromLstar(r){return 100*labInvf((r+16)/116)}function linearized(r){r/=255;return r<=.040449936?r/12.92*100:100*Math.pow((.055+r)/1.055,2.4)}function delinearized(r){r/=100;let n=0;return n=r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055,mathUtils.clampInt(0,255,Math.round(255*n))}function whitePointD65(){return WHITE_POINT_D65}function labF(r){return 216/24389<r?Math.pow(r,1/3):(24389/27*r+16)/116}function labInvf(r){var n=r*r*r;return 216/24389<n?n:(116*r-16)/(24389/27)}export{argbFromRgb,argbFromLinrgb,alphaFromArgb,redFromArgb,greenFromArgb,blueFromArgb,isOpaque,argbFromXyz,xyzFromArgb,argbFromLab,labFromArgb,argbFromLstar,lstarFromArgb,yFromLstar,linearized,delinearized,whitePointD65};