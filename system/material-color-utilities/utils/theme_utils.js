import{Blend}from"../blend/blend";import{CorePalette}from"../palettes/core_palette";import{Scheme}from"../scheme/scheme";import{sourceColorFromImage}from"./image_utils";import{hexFromArgb}from"./string_utils";function themeFromSourceColor(o,e=[]){var r=CorePalette.of(o);return{source:o,schemes:{light:Scheme.light(o),dark:Scheme.dark(o)},palettes:{primary:r.a1,secondary:r.a2,tertiary:r.a3,neutral:r.n1,neutralVariant:r.n2,error:r.error},customColors:e.map(e=>customColor(o,e))}}async function themeFromImage(e,o=[]){return themeFromSourceColor(await sourceColorFromImage(e),o)}function customColor(e,o){let r=o.value;var t=r,t=(o.blend&&(r=Blend.harmonize(t,e)),CorePalette.of(r));const l=t.a1;return{color:o,value:r,light:{color:l.tone(40),onColor:l.tone(100),colorContainer:l.tone(90),onColorContainer:l.tone(10)},dark:{color:l.tone(80),onColor:l.tone(20),colorContainer:l.tone(30),onColorContainer:l.tone(90)}}}function applyTheme(e,o){const r=(null==o?void 0:o.target)||document.body;var t=null!=(t=null==o?void 0:o.dark)&&t?e.schemes.dark:e.schemes.light;if(null!=o&&o.brightnessSuffix?(setSchemeProperties(r,e.schemes.dark,"-dark"),setSchemeProperties(r,e.schemes.light,"-light")):setSchemeProperties(r,t),null!=o&&o.paletteTones){var l,n,a=null!=(t=null==o?void 0:o.paletteTones)?t:[];for([l,n]of Object.entries(e.palettes)){var s=l.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();for(const i of a){var m=`--md-ref-palette-${s}-`+s+i,c=hexFromArgb(n.tone(i));r.style.setProperty(m,c)}}}}function setSchemeProperties(e,o,r=""){for(var[t,l]of Object.entries(o.toJSON())){t=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const s=hexFromArgb(l);e.style.setProperty("--md-sys-color-"+t+r,s);var l=parseInt(s.slice(1,3),16),n=parseInt(s.slice(3,5),16),a=parseInt(s.slice(5,7),16);e.style.setProperty(`--md-sys-color-${t}-rgb`+r,l+`, ${n}, `+a)}}export{themeFromSourceColor,themeFromImage,customColor,applyTheme};