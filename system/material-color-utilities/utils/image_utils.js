import{QuantizerCelebi}from"../quantize/quantizer_celebi";import{Score}from"../score/score";import{argbFromRgb}from"./color_utils";async function sourceColorFromImage(a){var r=await new Promise((e,r)=>{const o=document.createElement("canvas"),t=o.getContext("2d");if(!t)return r(new Error("Could not get canvas context"));a.onload=()=>{o.width=a.width,o.height=a.height,t.drawImage(a,0,0),e(t.getImageData(0,0,a.width,a.height).data)}});const o=[];for(let e=0;e<r.length;e+=4){var t=r[e],n=r[e+1],i=r[e+2];r[e+3]<255||(t=argbFromRgb(t,n,i),o.push(t))}var e=QuantizerCelebi.quantize(o,128);return Score.score(e)[0]}export{sourceColorFromImage};