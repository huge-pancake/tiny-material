import*as utils from"../utils/color_utils";import*as math from"../utils/math_utils";class ViewingConditions{constructor(t,i,s,o,a,h,n,r,e,l){this.n=t,this.aw=i,this.nbb=s,this.ncb=o,this.c=a,this.nc=h,this.rgbD=n,this.fl=r,this.fLRoot=e,this.z=l}static make(t=utils.whitePointD65(),i=200/Math.PI*utils.yFromLstar(50)/100,s=50,o=2,a=!1){var h=.401288*t[0]+.650173*t[1]+-.051461*t[2],n=-.250268*t[0]+1.204414*t[1]+.045854*t[2],r=-.002079*t[0]+.048952*t[1]+.953127*t[2],o=.8+o/10,e=.9<=o?math.lerp(.59,.69,10*(o-.9)):math.lerp(.525,.59,10*(o-.8));let l=a?1:o*(1-1/3.6*Math.exp((-i-42)/92));var a=o,o=[(l=1<l?1:l<0?0:l)*(100/h)+1-l,l*(100/n)+1-l,l*(100/r)+1-l],w=1/(5*i+1),w=w*w*w*w,m=1-w,w=w*i+.1*m*m*Math.cbrt(5*i),m=utils.yFromLstar(s)/t[1],i=1.48+Math.sqrt(m),s=.725/Math.pow(m,.2),t=s,h=[Math.pow(w*o[0]*h/100,.42),Math.pow(w*o[1]*n/100,.42),Math.pow(w*o[2]*r/100,.42)],n=[400*h[0]/(h[0]+27.13),400*h[1]/(h[1]+27.13),400*h[2]/(h[2]+27.13)],r=(2*n[0]+n[1]+.05*n[2])*s;return new ViewingConditions(m,r,s,t,e,a,o,w,Math.pow(w,.25),i)}}ViewingConditions.DEFAULT=ViewingConditions.make();export{ViewingConditions};